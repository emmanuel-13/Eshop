{% load static extras %}
<!DOCTYPE html>
<html lang="en">

<head>
   <title>Settings</title>

   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
   <!-- Favicon icon -->
   <link rel="shortcut icon" href="{% static 'assets/images/favicon.png' %}" type="image/x-icon">
   <link rel="icon" href="{% static 'assets/images/favicon.ico' %}" type="image/x-icon">

   <!-- Google font-->
   <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700" rel="stylesheet">

   <!-- themify -->
   <link rel="stylesheet" type="text/css" href="{% static 'assets/icon/themify-icons/themify-icons.css' %}">

   <!-- iconfont -->
   <link rel="stylesheet" type="text/css" href="{% static 'assets/icon/icofont/css/icofont.css' %}">

   <!-- simple line icon -->
   <link rel="stylesheet" type="text/css" href="{% static 'assets/icon/simple-line-icons/css/simple-line-icons.css' %}">

   <!-- Required Fremwork -->
   <link rel="stylesheet" type="text/css" href="{% static 'assets/plugins/bootstrap/css/bootstrap.min.css' %}">

   <!-- Chartlist chart css -->
   <link rel="stylesheet" href="{% static 'assets/plugins/chartist/dist/chartist.css' %}" type="text/css" media="all">

   <!-- Weather css -->
   <link href="{% static 'assets/css/svg-weather.css' %}" rel="stylesheet">


   <!-- Style.css -->
   <link rel="stylesheet" type="text/css" href="{% static 'assets/css/main.css' %}">

   <!-- Responsive.css-->
   <link rel="stylesheet" type="text/css" href="{% static 'assets/css/responsive.css' %}">
   <style>
      #pro {
         display: none;
      }
   </style>

</head>

<body class="sidebar-mini fixed">
   <div class="loader-bg">
      <div class="loader-bar">
      </div>
   </div>
   <div class="wrapper">
      <!-- Navbar-->
      {% include "dashboard/nav.html" %}
      <!-- Side-Nav-->
      {% include "dashboard/sidebar.html" %}
      <!-- Sidebar chat start -->
      <div id="sidebar" class="p-fixed header-users showChat">
         <div class="had-container">
            <div class="card card_main header-users-main">
               <div class="card-content user-box">
                  <div class="md-group-add-on p-20">
                     <span class="md-add-on">
                                    <i class="icofont icofont-search-alt-2 chat-search"></i>
                                 </span>
                     <div class="md-input-wrapper">
                        <input type="text" class="md-form-control" name="username" id="search-friends">
                        <label>Search</label>
                     </div>

                  </div>
                  <div class="media friendlist-main">

                     <h6>Friend List</h6>

                  </div>
                  <div class="main-friend-list">
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-2.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Alice</div>
                           <span>1 hour ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="7" data-status="offline" data-username="Michael Scofield" data-toggle="tooltip" data-placement="left" title="Michael Scofield">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-3.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-danger"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Michael Scofield</div>
                           <span>3 hours ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="5" data-status="online" data-username="Irina Shayk" data-toggle="tooltip" data-placement="left" title="Irina Shayk">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-4.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Irina Shayk</div>
                           <span>1 day ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="6" data-status="offline" data-username="Sara Tancredi" data-toggle="tooltip" data-placement="left" title="Sara Tancredi">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-5.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-danger"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Sara Tancredi</div>
                           <span>2 days ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-2.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Alice</div>
                           <span>1 hour ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-2.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Alice</div>
                           <span>1 hour ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-2.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Alice</div>
                           <span>1 hour ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                     <div class="media friendlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">

                        <a class="media-left" href="#!">
                           <img class="media-object img-circle" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
                           <div class="live-status bg-success"></div>
                        </a>
                        <div class="media-body">
                           <div class="friend-header">Josephin Doe</div>
                           <span>20min ago</span>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>

      </div>
      <div class="showChat_inner">
         <div class="media chat-inner-header">
            <a class="back_chatBox">
               <i class="icofont icofont-rounded-left"></i> Josephin Doe
            </a>
         </div>
         <div class="media chat-messages">
            <a class="media-left photo-table" href="#!">
               <img class="media-object img-circle m-t-5" src="{% static 'assets/images/avatar-1.png' %}" alt="Generic placeholder image">
               <div class="live-status bg-success"></div>
            </a>
            <div class="media-body chat-menu-content">
               <div class="">
                  <p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
                  <p class="chat-time">8:20 a.m.</p>
               </div>
            </div>
         </div>
         <div class="media chat-messages">
            <div class="media-body chat-menu-reply">
               <div class="">
                  <p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
                  <p class="chat-time">8:20 a.m.</p>
               </div>
            </div>
            <div class="media-right photo-table">
               <a href="#!">
                  <img class="media-object img-circle m-t-5" src="{% static 'assets/images/avatar-2.png' %}" alt="Generic placeholder image">
                  <div class="live-status bg-success"></div>
               </a>
            </div>
         </div>
         <div class="media chat-reply-box">
            <div class="md-input-wrapper">
               <input type="text" class="md-form-control" id="inputEmail" name="inputEmail">
               <label>Share your thoughts</label>
               <span class="highlight"></span>
               <span class="bar"></span> <button type="button" class="chat-send waves-effect waves-light">
                     <i class="icofont icofont-location-arrow f-20 "></i>
                 </button>

               <button type="button" class="chat-send waves-effect waves-light">
                    <i class="icofont icofont-location-arrow f-20 "></i>
                </button>
            </div>

         </div>
      </div>
      <!-- Sidebar chat end-->
      <div class="content-wrapper">
         <!-- Container-fluid starts -->
         <!-- Main content starts -->
         <div class="container-fluid">
            <div class="row">
               <div class="main-header">
                  <h4>Annoucement</h4>
               </div>
            </div>
            <hr />

            

            <div class="row dashboard-header">
               <div class="col-lg-4 col-md-6">
                  <div class="card">
                     <div class="user-block-2">
                        <img class="img-fluid" src="{% if request.user.images %} {{request.user.images.url }} {% else %} {% static 'assets/images/widget/user-1.png' %} {% endif %}" alt="user-header" height="100px" width="100px">
                        <h5>{% if request.user.get_full_name %} {{ request.user.get_full_name }}{% else %} {{ request.user.username }} {% endif %}</h5>
                        <h6>{% if request.user.main_stack %} {{ request.user.main_stack }} {% endif %} </h6>
                     </div>
                     <div class="card-block">

                        <div class="user-block-2-activities">
                           <div class="user-block-2-active">
                              <i class="icofont icofont-ui-user"></i> Pending Purchase
                              <label class="label label-primary">{{pending|length}}</label>
                           </div>

                           {% if pending %}
                              {% for pending in pending  %}
                                 <div style="display: flex; justify-content: space-between">
                                    <span>  {{ pending.cart.product.name }} </span>
                                    <span class="text-right"> {{ pending.status }}</span>
                                 </div>
                                 <hr/>
                              {% endfor %}
                              <div style="display: flex; justify-content: space-around">
                                 <a href="{% url "paid" %}"><button class="btn btn-success"> View all </button></a>
                                 <a href="{% url "shop" %}"><button class="btn btn-success"> View Shop </button></a>
                              </div>
                           {% else %}
                              <p> no pending purchase found </p>
                              <div style="display: flex; justify-content: center">
                                 <a href="{% url "shop" %}"><button> Shop Now </button></a>
                              </div>
                           {% endif %}

                        </div>


                        <div class="text-center">
                           {% comment %} <button type="button" class="btn btn-warning waves-effect waves-light text-uppercase m-r-30">
                                    Follows
                           </button> {% endcomment %}

                           {% if mes %}
                           <a href="{% url "room" mes.room.name %}">
                              <button type="button" class="btn btn-primary waves-effect waves-light text-uppercase" ">
                                 Recent Message
                              </button>
                           </a>
                           {% endif %}
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-lg-8 col-md-6" id="carrier">
                  <div class="col-lg-6 col-md-6">
                     <div class="card dashboard-product">
                        <span>All Annoucement</span>
                        <h4 class="dashboard-total-products"><span> {% annoucement request.user %} Notifications </span></h4>
                        <div class="side-box">
                           <i class="ti-direction-alt text-success-color" id="room"></i>
                        </div>
                     </div>
                  </div>
                  <div class="col-lg-6 col-md-6">
                     <div class="card dashboard-product">
                        <span> Purchase Product</span>
                        <h4 class="dashboard-total-products"><span>{% if pending and pur %} {{ pending|length }} Pending | {{ pur|length }} Deliver{{pur|pluralize:", ed"}} {% elif pending %} {{pending|length}} Pending Found {% elif pur %} {{ pur|length}} Purchase Product {% else %} No Product {% endif %}</span></h4>
                        <span class="label label-success">Total view</span> {{ pending|length }} Pending | {{ pur|length }} Purchase Product Found
                        <div class="side-box" id="product">
                           <i class="ti-direction-alt text-success-color"></i>
                        </div>
                     </div>
                  </div>
               </div>

               <div class="col-lg-8 col-md-6" id="overall">
                  <div class="col-lg-12 col-md-12" id="rooms">
                     <div class="card dashboard-product">
                           <span>My Messages </span>
                           <h4 class="dashboard-total-products"><span>Messages</span></h4>
                           {% if mess %}
                                 
                              <table class="table-borderless table">
                                 <thead> 
                                    <tr>
                                       <th> Author </th>
                                       <th> Topic </th>
                                       <th> Message </th>
                                       <th> User </th>
                                    </tr>
                                 </thead>
                                 <tbody> 
                                    {% for message in mess  %}
                                       {% if message.user != request.user %}
                                          {% if request.user in message.room.participant.all %}
                                          <tr>
                                             <td> {{ message.room.host.username }} </td>
                                             <td> {{ message.room.topic|linebreaks }} </td>
                                             <td> {{ message.body|linebreaks }} </td>
                                             <td> {{ message.user.username }} </td>
                                             <td class="btn btn-success"><a href="{% url "room" message.room.name %}"> view </td>
                                          </tr>
                                          {% endif %}
                                       {% endif %}
                                    {% endfor %}
                                 </tbody>
                              </table>
                                 
                              
                              <div style="display: flex; justify-content: center">
                                 
                              </div>
                           {% else %}
                              <p> No Room found </p>
                           {% endif %}
                           <div class="side-box" id="roomss">
                              <i class="ti-direction text-success-color"></i>
                           </div>
                     </div>
                  </div>

                  <div class="col-lg-12 col-md-6" id="pro">
                     <div class="card dashboard-product">
                           <span>All Purchase Product </span>
                           <h4 class="dashboard-total-products"><span>{% if pur %} Avaliable Product {% else %} No Product  {% endif %}</span></h4>
                           {% if pur %}
                                 <table class="table-borderless table">
                                    <thead> 
                                       <tr>
                                          <th> Product Name </th>
                                          <th> Image </th>
                                          <th> Category </th>
                                          <th> Sub Category </th>
                                          <th> brand </th>
                                       </tr>
                                    </thead>
                                    <tbody> 
                                       {% for pro in pur %}
                                       <tr>
                                          <td> {{ pro.cart.product.name|linebreaks }} </td>
                                          <td> <img src="{{ pro.cart.product.image.url }}" height="30px" width="30px"> </td>
                                          <td> {{ pro.cart.product.category.name|linebreaks }} </td>
                                          <td> {{ pro.cart.product.subcat.name|linebreaks }} </td>
                                          <td> {{ pro.cart.product.brand.name|linebreaks }} </td>
                                          {% comment %} <td><a href="#"> <button class="btn btn-primary"> View now </button> </a></td> {% endcomment %}
                                       </tr>
                                       {% endfor %}
                                    </tbody>
                                 </table>

                                 <!-- pagination button -->
                                 <div style="display: flex; justify-content: center">
                                    {% if pur.has_other_pages %}
                                    <div class="pagination justify-content-center">
                                          <ul class="pagination">
                                             {% if pur.has_previous %}
                                             <li class="page-item">
                                                <a class="page-link" href="?page=1">&laquo;</a>
                                             </li>
                                             <li class="page-item">
                                                <a class="page-link" href="?page={{ pur.previous_page_number }}">{{ pur.previous_page_number }}</a>
                                             </li>
                                             {% endif %}
                                             
                                             <li class="page-item active">
                                                <a class="page-link" href="?page={{ pur.number }}">{{ pur.number }} <span class="sr-only">(current)</span></a>
                                             </li>
                                             
                                             {% if page_obj.has_next %}
                                             <li class="page-item">
                                                <a class="page-link" href="?page={{ pur.next_page_number }}">{{ pur.next_page_number }}</a>
                                             </li>
                                             <li class="page-item">
                                                <a class="page-link" href="?page={{ pur.paginator.num_pages }}">&raquo;</a>
                                             </li>
                                             {% endif %}
                                          </ul>
                                    </div>
                                    {% endif %}
                                 </div>
                                 <!-- pagination end -->
                              

                           {% else %}
                              <p> No Room found </p>
                           {% endif %}
                           <div class="side-box" id="products">
                              <i class="ti-direction text-success-color"></i>
                           </div>
                     </div>
                  </div>
               </div>
            </div>

         </div>
         <!-- Main content ends -->
      </div>
   </div>

   <script src="{% static "js/settings.js" %}"></script>

   <!-- Required Jqurey -->
   <script src="{% static 'assets/plugins/Jquery/dist/jquery.min.js' %}"></script>
   <script src="{% static 'assets/plugins/jquery-ui/jquery-ui.min.js' %}"></script>
   <script src="{% static 'assets/plugins/tether/dist/js/tether.min.js' %}"></script>

   <!-- Required Fremwork -->
   <script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>

   <!-- Scrollbar JS-->
   <script src="{% static 'assets/plugins/jquery-slimscroll/jquery.slimscroll.js' %}"></script>
   <script src="{% static 'assets/plugins/jquery.nicescroll/jquery.nicescroll.min.js' %}"></script>

   <!--classic JS-->
   <script src="{% static 'assets/plugins/classie/classie.js' %}"></script>

   <!-- notification -->
   <script src="{% static 'assets/plugins/notification/js/bootstrap-growl.min.js' %}"></script>

   <!-- Sparkline charts -->
   <script src="{% static 'assets/plugins/jquery-sparkline/dist/jquery.sparkline.js' %}"></script>

   <!-- Counter js  -->
   <script src="{% static 'assets/plugins/waypoints/jquery.waypoints.min.js' %}"></script>
   <script src="{% static 'assets/plugins/countdown/js/jquery.counterup.js' %}"></script>

   <!-- Echart js -->
   <script src="{% static 'assets/plugins/charts/echarts/js/echarts-all.js' %}"></script>

   <script src="https://code.highcharts.com/highcharts.js"></script>
   <script src="https://code.highcharts.com/modules/exporting.js"></script>
   <script src="https://code.highcharts.com/highcharts-3d.js"></script>

   <!-- custom js -->
   <script type="text/javascript" src="{% static 'assets/js/main.min.js' %}"></script>
   <script type="text/javascript" src="{% static 'assets/pages/dashboard.js' %}"></script>
   <script type="text/javascript" src="{% static 'assets/pages/elements.js' %}"></script>
   <script src="{% static 'assets/js/menu.min.js' %}"></script>
<script>
var $window = $(window);
var nav = $('.fixed-button');
$window.scroll(function(){
    if ($window.scrollTop() >= 200) {
       nav.addClass('active');
    }
    else {
       nav.removeClass('active');
    }
});
</script>

</body>

</html>
